{"ast":null,"code":"import React,{useEffect}from'react';import{Link}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{Row,Col}from'react-bootstrap';import Product from'../components/Product';import Message from'../components/Message';import Loader from'../components/Loader';import Paginate from'../components/Paginate';import ProductCarousel from'../components/ProductCarousel';import Meta from'../components/Meta';import ProductListScreen from'./ProductListScreen';import{listProducts,listProductByCategories}from'../actions/productActions';var HomeScreen=function HomeScreen(_ref){var match=_ref.match;var keyword=match.params.keyword;var category=match.params.category;console.log(\"category\",category);var pageNumber=match.params.pageNumber||1;var dispatch=useDispatch();var productAllList=useSelector(function(state){return state.productAllList;});var loadingCategory=productAllList.loading,productByCategorys=productAllList.productByCategorys;var productList=useSelector(function(state){return state.productList;});var loading=productList.loading,error=productList.error,products=productList.products,page=productList.page,pages=productList.pages;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;useEffect(function(){dispatch(listProductByCategories());},[]);useEffect(function(){dispatch(listProducts(keyword,pageNumber,'',true,category));},[dispatch,keyword,pageNumber,category]);return/*#__PURE__*/React.createElement(React.Fragment,null,userInfo&&userInfo.isAdmin?/*#__PURE__*/React.createElement(ProductListScreen,null):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Meta,null),(loading||loadingCategory)&&/*#__PURE__*/React.createElement(Loader,null),!keyword&&!category?/*#__PURE__*/React.createElement(ProductCarousel,null):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Link,{to:\"/\",className:\"btn btn-light\"},\"Go Back\"),error?/*#__PURE__*/React.createElement(Message,{variant:\"danger\"},error):/*#__PURE__*/React.createElement(\"div\",{className:\"container-product\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"category-title\"},\"Search Result\"),/*#__PURE__*/React.createElement(Row,null,products.map(function(product){return/*#__PURE__*/React.createElement(Col,{key:product._id,sm:12,md:6,lg:4,xl:3},/*#__PURE__*/React.createElement(Product,{product:product}));})))),!keyword&&!category&&productByCategorys&&Object.entries(productByCategorys).map(function(item,index){return/*#__PURE__*/React.createElement(React.Fragment,{key:index},/*#__PURE__*/React.createElement(\"h1\",{className:\"category-title\"},item[0]),/*#__PURE__*/React.createElement(\"div\",{className:\"container-product\"},/*#__PURE__*/React.createElement(Row,null,item[1].map(function(product,index){return/*#__PURE__*/React.createElement(Col,{key:product._id,sm:12,md:6,lg:4,xl:3},/*#__PURE__*/React.createElement(Product,{product:product}));}))));})));};export default HomeScreen;","map":{"version":3,"names":["React","useEffect","Link","useDispatch","useSelector","Row","Col","Product","Message","Loader","Paginate","ProductCarousel","Meta","ProductListScreen","listProducts","listProductByCategories","HomeScreen","_ref","match","keyword","params","category","console","log","pageNumber","dispatch","productAllList","state","loadingCategory","loading","productByCategorys","productList","error","products","page","pages","userLogin","userInfo","createElement","Fragment","isAdmin","to","className","variant","map","product","key","_id","sm","md","lg","xl","Object","entries","item","index"],"sources":["/Users/mac/Desktop/hcmus/pro_shop/frontend/src/screens/HomeScreen.js"],"sourcesContent":["import React, { useEffect } from 'react'\nimport { Link } from 'react-router-dom'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { Row, Col } from 'react-bootstrap'\nimport Product from '../components/Product'\nimport Message from '../components/Message'\nimport Loader from '../components/Loader'\nimport Paginate from '../components/Paginate'\nimport ProductCarousel from '../components/ProductCarousel'\nimport Meta from '../components/Meta'\nimport ProductListScreen from './ProductListScreen'\nimport { listProducts,listProductByCategories } from '../actions/productActions'\n\nconst HomeScreen = ({ match }) => {\n  const keyword = match.params.keyword\n\n  const category = match.params.category\n  console.log(\"category\",category)\n\n  const pageNumber = match.params.pageNumber || 1\n\n  const dispatch = useDispatch()\n\n  const productAllList = useSelector((state) => state.productAllList)\n  const { loading : loadingCategory, productByCategorys } = productAllList\n\n  const productList = useSelector((state) => state.productList)\n  const { loading, error, products, page, pages } = productList\n\n  const userLogin = useSelector((state) => state.userLogin)\n  const { userInfo } = userLogin\n\n  useEffect(() => {\n    dispatch(listProductByCategories())\n  }, [])\n\n\n  useEffect(() => {\n    dispatch(listProducts(keyword, pageNumber,'',true, category))\n  }, [dispatch, keyword, pageNumber,category])\n\n  return (\n    <>\n      {userInfo && userInfo.isAdmin ? \n      ( \n        <ProductListScreen />\n      )\n      : (\n        <>\n          <Meta />\n          {(loading || loadingCategory) && <Loader/> }\n          {!keyword && !category? (\n            <ProductCarousel />\n          ) \n          : \n          (\n            <>\n            <Link to='/' className='btn btn-light'>\n              Go Back\n            </Link>\n          { error ? (\n            <Message variant='danger'>{error}</Message>\n          ) : (\n            <div className='container-product'>\n              <h1 className='category-title'>Search Result</h1>\n              <Row>\n                {products.map((product) => (\n                  <Col key={product._id} sm={12} md={6} lg={4} xl={3}>\n                    <Product product={product} />\n                  </Col>\n                ))}\n              </Row>\n              {/* <Paginate\n                pages={pages}\n                page={page}\n                keyword={keyword ? keyword : ''}\n              /> */}\n            </div>\n          )}\n            </>\n          )}\n          {!keyword && !category && productByCategorys && Object.entries(productByCategorys).map((item,index)=>(\n            <React.Fragment key={index}>\n              <h1 className='category-title'>{item[0]}</h1>\n              <div className='container-product'>\n                <Row>\n                  {item[1].map((product,index) => (\n                    <Col key={product._id} sm={12} md={6} lg={4} xl={3}>\n                      <Product product={product} />\n                    </Col>\n                  ))}\n                </Row>\n              </div>\n            </React.Fragment>\n          ))}\n        </>\n      )}\n    </>\n  )\n}\n\nexport default HomeScreen\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}